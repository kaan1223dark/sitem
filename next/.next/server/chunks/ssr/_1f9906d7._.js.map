{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hu/Downloads/Compressed/luuppi-next-main4/luuppi-next-main/next/src/components/EventSelector/EventSelector.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/EventSelector/EventSelector.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/EventSelector/EventSelector.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAkT,GAC/U,gFACA","debugId":null}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hu/Downloads/Compressed/luuppi-next-main4/luuppi-next-main/next/src/components/EventSelector/EventSelector.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/EventSelector/EventSelector.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/EventSelector/EventSelector.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA8R,GAC3T,4DACA","debugId":null}},
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 92, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hu/Downloads/Compressed/luuppi-next-main4/luuppi-next-main/next/src/libs/strapi/blocks-converter.ts"],"sourcesContent":["import { BlocksContent } from '@strapi/blocks-react-renderer';\n\nexport function getPlainText(block: BlocksContent): string {\n  return block\n    .map((node) => {\n      switch (node.type) {\n        case 'heading':\n          return node.children.map((child) =>\n            child.type === 'text' ? child.text : child.url,\n          );\n        case 'code':\n          return node.children.map((child) =>\n            child.type === 'text' ? child.text : child.url,\n          );\n        case 'quote':\n          return node.children.map((child) =>\n            child.type === 'text' ? child.text : child.url,\n          );\n        case 'list':\n          return node.children\n            .map((child) => recursiveListRenderer(child))\n            .flatMap((x) => x);\n        case 'paragraph': {\n          return node.children.map((child) =>\n            child.type === 'text' ? child.text : child.url,\n          );\n        }\n        default:\n          return [];\n      }\n    })\n    .flatMap((x) => x)\n    .join(' ');\n}\n\nfunction recursiveListRenderer(node: any): string[] {\n  if (node.type === 'list-item') {\n    return node.children.map((child: any) =>\n      child.type === 'text' ? child.text : child.url,\n    );\n  }\n\n  return node.children.map((child: any) => recursiveListRenderer(child));\n}\n"],"names":[],"mappings":";;;AAEO,SAAS,aAAa,KAAoB;IAC/C,OAAO,MACJ,GAAG,CAAC,CAAC;QACJ,OAAQ,KAAK,IAAI;YACf,KAAK;gBACH,OAAO,KAAK,QAAQ,CAAC,GAAG,CAAC,CAAC,QACxB,MAAM,IAAI,KAAK,SAAS,MAAM,IAAI,GAAG,MAAM,GAAG;YAElD,KAAK;gBACH,OAAO,KAAK,QAAQ,CAAC,GAAG,CAAC,CAAC,QACxB,MAAM,IAAI,KAAK,SAAS,MAAM,IAAI,GAAG,MAAM,GAAG;YAElD,KAAK;gBACH,OAAO,KAAK,QAAQ,CAAC,GAAG,CAAC,CAAC,QACxB,MAAM,IAAI,KAAK,SAAS,MAAM,IAAI,GAAG,MAAM,GAAG;YAElD,KAAK;gBACH,OAAO,KAAK,QAAQ,CACjB,GAAG,CAAC,CAAC,QAAU,sBAAsB,QACrC,OAAO,CAAC,CAAC,IAAM;YACpB,KAAK;gBAAa;oBAChB,OAAO,KAAK,QAAQ,CAAC,GAAG,CAAC,CAAC,QACxB,MAAM,IAAI,KAAK,SAAS,MAAM,IAAI,GAAG,MAAM,GAAG;gBAElD;YACA;gBACE,OAAO,EAAE;QACb;IACF,GACC,OAAO,CAAC,CAAC,IAAM,GACf,IAAI,CAAC;AACV;AAEA,SAAS,sBAAsB,IAAS;IACtC,IAAI,KAAK,IAAI,KAAK,aAAa;QAC7B,OAAO,KAAK,QAAQ,CAAC,GAAG,CAAC,CAAC,QACxB,MAAM,IAAI,KAAK,SAAS,MAAM,IAAI,GAAG,MAAM,GAAG;IAElD;IAEA,OAAO,KAAK,QAAQ,CAAC,GAAG,CAAC,CAAC,QAAe,sBAAsB;AACjE","debugId":null}},
    {"offset": {"line": 127, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hu/Downloads/Compressed/luuppi-next-main4/luuppi-next-main/next/src/libs/strapi/events.ts"],"sourcesContent":["import { Dictionary } from '@/models/locale';\nimport { APIResponseData } from '@/types/types';\n\nconst luuppiMember = process.env.NEXT_PUBLIC_LUUPPI_MEMBER_ID!;\nconst luuppiNonMember = process.env.NEXT_PUBLIC_NO_ROLE_ID!;\n\n// Incase an event has a Registeration for luuppi-members or non-members (\"default\"), add a duplicate event\n// to show the opening time in the calendar\nexport const addEventRegisterationOpensAtInfo = <T>(\n  acc: T[],\n  event: APIResponseData<'api::event.event'>,\n  // eslint-disable-next-line no-unused-vars\n  formatEvent: (event: APIResponseData<'api::event.event'>) => T,\n  dictionary: Dictionary,\n) => {\n  if (!event?.attributes?.Registration?.TicketTypes) {\n    return [...acc, formatEvent(event)];\n  }\n\n  const memberSaleStartsAt = event.attributes.Registration?.TicketTypes.find(\n    (type) => {\n      const roleId = type?.Role?.data?.attributes?.RoleId;\n      return roleId && [luuppiMember, luuppiNonMember].includes(roleId);\n    },\n  );\n\n  if (!memberSaleStartsAt?.RegistrationStartsAt) {\n    return [...acc, formatEvent(event)];\n  }\n\n  return [\n    ...acc,\n    formatEvent(event),\n    formatEvent({\n      ...event,\n      attributes: {\n        ...event.attributes,\n        StartDate: new Date(memberSaleStartsAt.RegistrationStartsAt),\n        EndDate: new Date(memberSaleStartsAt.RegistrationStartsAt),\n        NameEn: `${event.attributes['NameEn']} ${dictionary.general.opens}`,\n        NameFi: `${event.attributes['NameFi']} ${dictionary.general.opens}`,\n      },\n    }),\n  ];\n};\n"],"names":[],"mappings":";;;AAGA,MAAM,eAAe,QAAQ,GAAG,CAAC,4BAA4B;AAC7D,MAAM,kBAAkB,QAAQ,GAAG,CAAC,sBAAsB;AAInD,MAAM,mCAAmC,CAC9C,KACA,OACA,0CAA0C;AAC1C,aACA;IAEA,IAAI,CAAC,OAAO,YAAY,cAAc,aAAa;QACjD,OAAO;eAAI;YAAK,YAAY;SAAO;IACrC;IAEA,MAAM,qBAAqB,MAAM,UAAU,CAAC,YAAY,EAAE,YAAY,KACpE,CAAC;QACC,MAAM,SAAS,MAAM,MAAM,MAAM,YAAY;QAC7C,OAAO,UAAU;YAAC;YAAc;SAAgB,CAAC,QAAQ,CAAC;IAC5D;IAGF,IAAI,CAAC,oBAAoB,sBAAsB;QAC7C,OAAO;eAAI;YAAK,YAAY;SAAO;IACrC;IAEA,OAAO;WACF;QACH,YAAY;QACZ,YAAY;YACV,GAAG,KAAK;YACR,YAAY;gBACV,GAAG,MAAM,UAAU;gBACnB,WAAW,IAAI,KAAK,mBAAmB,oBAAoB;gBAC3D,SAAS,IAAI,KAAK,mBAAmB,oBAAoB;gBACzD,QAAQ,GAAG,MAAM,UAAU,CAAC,SAAS,CAAC,CAAC,EAAE,WAAW,OAAO,CAAC,KAAK,EAAE;gBACnE,QAAQ,GAAG,MAAM,UAAU,CAAC,SAAS,CAAC,CAAC,EAAE,WAAW,OAAO,CAAC,KAAK,EAAE;YACrE;QACF;KACD;AACH","debugId":null}},
    {"offset": {"line": 174, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hu/Downloads/Compressed/luuppi-next-main4/luuppi-next-main/next/src/libs/strapi/format-metadata.ts"],"sourcesContent":["import { Metadata } from 'next';\nimport 'server-only';\n\n/**\n * Takes \"content page\"'s Seo data and pathname and returns formatted metadata\n * that can be used in the head of the page.\n * @param content content page data\n * @param pathname current page's pathname\n * @returns formatted metadata\n */\nexport const formatMetadata = (\n  content: any,\n  pathname: string,\n  isNews = false,\n): Metadata => {\n  const seo = content.data.attributes.Seo;\n\n  if (!seo) throw new Error('No SEO data found');\n\n  const cmsUrl = process.env.NEXT_PUBLIC_STRAPI_BASE_URL;\n\n  let twitterImage: string | null = null;\n  if (seo.twitter?.twitterImage?.data?.attributes?.url) {\n    twitterImage = `${cmsUrl}${seo.twitter.twitterImage.data.attributes.url}`;\n  }\n  let openGraphImage: string | null = null;\n  if (seo.openGraph?.openGraphImage?.data?.attributes?.url) {\n    openGraphImage = `${cmsUrl}${seo.openGraph.openGraphImage.data.attributes.url}`;\n  }\n\n  if (isNews && !openGraphImage) {\n    const ogUrl = new URL('https://luuppi-opengraph.vercel.app/api/og');\n    ogUrl.searchParams.append('author', seo.metaAuthor ?? 'Luuppi ry');\n    ogUrl.searchParams.append('title', seo.metaTitle);\n    ogUrl.searchParams.append(\n      'published',\n      seo.publishedAt ?? new Date().toISOString(),\n    );\n    ogUrl.searchParams.append('image', 'https://i.pravatar.cc/300');\n  }\n\n  return {\n    title: `${seo.metaTitle} | Luuppi ry`,\n    description: seo.metaDescription,\n    authors: {\n      name: seo.metaAuthor,\n    },\n    keywords: seo.metaKeywords,\n    alternates: {\n      canonical: pathname,\n      languages: {\n        tr: `/tr${pathname.slice(3)}`,\n        en: `/en${pathname.slice(3)}`,\n      },\n    },\n    openGraph: {\n      title: seo.openGraph.openGraphTitle,\n      description: seo.openGraph.openGraphDescription,\n      url: pathname,\n      images: openGraphImage ? [openGraphImage] : undefined,\n      siteName: 'Luuppi ry',\n    },\n    twitter: {\n      title: seo.twitter.twitterTitle,\n      description: seo.twitter.twitterDescription,\n      card: 'summary_large_image',\n      images: twitterImage ? [twitterImage] : undefined,\n    },\n  };\n};\n"],"names":[],"mappings":";;;AACA;;AASO,MAAM,iBAAiB,CAC5B,SACA,UACA,SAAS,KAAK;IAEd,MAAM,MAAM,QAAQ,IAAI,CAAC,UAAU,CAAC,GAAG;IAEvC,IAAI,CAAC,KAAK,MAAM,IAAI,MAAM;IAE1B,MAAM;IAEN,IAAI,eAA8B;IAClC,IAAI,IAAI,OAAO,EAAE,cAAc,MAAM,YAAY,KAAK;QACpD,eAAe,GAAG,SAAS,IAAI,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,GAAG,EAAE;IAC3E;IACA,IAAI,iBAAgC;IACpC,IAAI,IAAI,SAAS,EAAE,gBAAgB,MAAM,YAAY,KAAK;QACxD,iBAAiB,GAAG,SAAS,IAAI,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,UAAU,CAAC,GAAG,EAAE;IACjF;IAEA,IAAI,UAAU,CAAC,gBAAgB;QAC7B,MAAM,QAAQ,IAAI,IAAI;QACtB,MAAM,YAAY,CAAC,MAAM,CAAC,UAAU,IAAI,UAAU,IAAI;QACtD,MAAM,YAAY,CAAC,MAAM,CAAC,SAAS,IAAI,SAAS;QAChD,MAAM,YAAY,CAAC,MAAM,CACvB,aACA,IAAI,WAAW,IAAI,IAAI,OAAO,WAAW;QAE3C,MAAM,YAAY,CAAC,MAAM,CAAC,SAAS;IACrC;IAEA,OAAO;QACL,OAAO,GAAG,IAAI,SAAS,CAAC,YAAY,CAAC;QACrC,aAAa,IAAI,eAAe;QAChC,SAAS;YACP,MAAM,IAAI,UAAU;QACtB;QACA,UAAU,IAAI,YAAY;QAC1B,YAAY;YACV,WAAW;YACX,WAAW;gBACT,IAAI,CAAC,GAAG,EAAE,SAAS,KAAK,CAAC,IAAI;gBAC7B,IAAI,CAAC,GAAG,EAAE,SAAS,KAAK,CAAC,IAAI;YAC/B;QACF;QACA,WAAW;YACT,OAAO,IAAI,SAAS,CAAC,cAAc;YACnC,aAAa,IAAI,SAAS,CAAC,oBAAoB;YAC/C,KAAK;YACL,QAAQ,iBAAiB;gBAAC;aAAe,GAAG;YAC5C,UAAU;QACZ;QACA,SAAS;YACP,OAAO,IAAI,OAAO,CAAC,YAAY;YAC/B,aAAa,IAAI,OAAO,CAAC,kBAAkB;YAC3C,MAAM;YACN,QAAQ,eAAe;gBAAC;aAAa,GAAG;QAC1C;IACF;AACF","debugId":null}},
    {"offset": {"line": 237, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hu/Downloads/Compressed/luuppi-next-main4/luuppi-next-main/next/src/app/%5Blang%5D/%28content-pages%29/events/page.tsx"],"sourcesContent":["import EventSelector from '@/components/EventSelector/EventSelector';\nimport { getDictionary } from '@/dictionaries';\nimport { getPlainText } from '@/libs/strapi/blocks-converter';\nimport { addEventRegisterationOpensAtInfo } from '@/libs/strapi/events';\nimport { formatMetadata } from '@/libs/strapi/format-metadata';\nimport { getStrapiData } from '@/libs/strapi/get-strapi-data';\nimport { Event } from '@/models/event';\nimport { SupportedLanguage } from '@/models/locale';\nimport {\n  APIResponse,\n  APIResponseCollection,\n  APIResponseData,\n} from '@/types/types';\nimport { Metadata } from 'next';\n\ninterface EventsProps {\n  params: Promise<{ lang: SupportedLanguage }>;\n}\n\nexport default async function Events(props: EventsProps) {\n  const params = await props.params;\n  const dictionary = await getDictionary(params.lang);\n\n  const sixMonthsAgo = new Date();\n  sixMonthsAgo.setMonth(sixMonthsAgo.getMonth() - 6);\n\n  const url = `/api/events?filters[StartDate][$gte]=${sixMonthsAgo.toISOString()}&populate=Registration.TicketTypes.Role`;\n\n  const data = await getStrapiData<APIResponseCollection<'api::event.event'>>(\n    params.lang,\n    url,\n    ['event'],\n  );\n\n  // Format event from raw event data\n  const formatEvent = (event: APIResponseData<'api::event.event'>): Event => ({\n    description: getPlainText(\n      event.attributes[\n        params.lang === 'en' ? 'DescriptionEn' : 'DescriptionFi'\n      ],\n    ),\n    end: new Date(event.attributes.EndDate),\n    start: new Date(event.attributes.StartDate),\n    id: event.id.toString(),\n    location:\n      event.attributes[params.lang === 'en' ? 'LocationEn' : 'LocationFi'],\n    title: event.attributes[params.lang === 'en' ? 'NameEn' : 'NameFi'],\n    hasTickets: Boolean(event.attributes.Registration?.TicketTypes.length),\n  });\n\n  const events = data.data.reduce(\n    (acc, event) =>\n      addEventRegisterationOpensAtInfo<Event>(\n        acc,\n        event,\n        formatEvent,\n        dictionary,\n      ),\n    [] as Event[],\n  );\n\n  return (\n    <div className=\"relative\">\n      <h1 className=\"mb-12\">{dictionary.navigation.events}</h1>\n      <EventSelector\n        dictionary={dictionary}\n        events={events}\n        lang={params.lang}\n      />\n      <div className=\"luuppi-pattern absolute -left-48 -top-10 -z-50 h-[701px] w-[801px] max-md:left-0 max-md:h-full max-md:w-full max-md:rounded-none\" />\n    </div>\n  );\n}\n\nexport async function generateMetadata(props: EventsProps): Promise<Metadata> {\n  const params = await props.params;\n  const url =\n    '/api/events-calendar?populate=Seo.twitter.twitterImage&populate=Seo.openGraph.openGraphImage';\n  const tags = ['events-calendar'];\n\n  const data = await getStrapiData<\n    APIResponse<'api::events-calendar.events-calendar'>\n  >(params.lang, url, tags);\n\n  const pathname = `/${params.lang}/events`;\n\n  return formatMetadata(data, pathname);\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AAce,eAAe,OAAO,KAAkB;IACrD,MAAM,SAAS,MAAM,MAAM,MAAM;IACjC,MAAM,aAAa,MAAM,CAAA,GAAA,mHAAA,CAAA,gBAAa,AAAD,EAAE,OAAO,IAAI;IAElD,MAAM,eAAe,IAAI;IACzB,aAAa,QAAQ,CAAC,aAAa,QAAQ,KAAK;IAEhD,MAAM,MAAM,CAAC,qCAAqC,EAAE,aAAa,WAAW,GAAG,uCAAuC,CAAC;IAEvH,MAAM,OAAO,MAAM,CAAA,GAAA,8IAAA,CAAA,gBAAa,AAAD,EAC7B,OAAO,IAAI,EACX,KACA;QAAC;KAAQ;IAGX,mCAAmC;IACnC,MAAM,cAAc,CAAC,QAAsD,CAAC;YAC1E,aAAa,CAAA,GAAA,4IAAA,CAAA,eAAY,AAAD,EACtB,MAAM,UAAU,CACd,OAAO,IAAI,KAAK,OAAO,kBAAkB,gBAC1C;YAEH,KAAK,IAAI,KAAK,MAAM,UAAU,CAAC,OAAO;YACtC,OAAO,IAAI,KAAK,MAAM,UAAU,CAAC,SAAS;YAC1C,IAAI,MAAM,EAAE,CAAC,QAAQ;YACrB,UACE,MAAM,UAAU,CAAC,OAAO,IAAI,KAAK,OAAO,eAAe,aAAa;YACtE,OAAO,MAAM,UAAU,CAAC,OAAO,IAAI,KAAK,OAAO,WAAW,SAAS;YACnE,YAAY,QAAQ,MAAM,UAAU,CAAC,YAAY,EAAE,YAAY;QACjE,CAAC;IAED,MAAM,SAAS,KAAK,IAAI,CAAC,MAAM,CAC7B,CAAC,KAAK,QACJ,CAAA,GAAA,+HAAA,CAAA,mCAAgC,AAAD,EAC7B,KACA,OACA,aACA,aAEJ,EAAE;IAGJ,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAS,WAAW,UAAU,CAAC,MAAM;;;;;;0BACnD,8OAAC,oJAAA,CAAA,UAAa;gBACZ,YAAY;gBACZ,QAAQ;gBACR,MAAM,OAAO,IAAI;;;;;;0BAEnB,8OAAC;gBAAI,WAAU;;;;;;;;;;;;AAGrB;AAEO,eAAe,iBAAiB,KAAkB;IACvD,MAAM,SAAS,MAAM,MAAM,MAAM;IACjC,MAAM,MACJ;IACF,MAAM,OAAO;QAAC;KAAkB;IAEhC,MAAM,OAAO,MAAM,CAAA,GAAA,8IAAA,CAAA,gBAAa,AAAD,EAE7B,OAAO,IAAI,EAAE,KAAK;IAEpB,MAAM,WAAW,CAAC,CAAC,EAAE,OAAO,IAAI,CAAC,OAAO,CAAC;IAEzC,OAAO,CAAA,GAAA,2IAAA,CAAA,iBAAc,AAAD,EAAE,MAAM;AAC9B","debugId":null}}]
}