{"version":3,"file":"index.mjs","sources":["../src/index.ts"],"sourcesContent":["import _ from 'lodash';\nimport nodemailer, { SendMailOptions } from 'nodemailer';\n\ninterface Settings {\n  defaultFrom: string;\n  defaultReplyTo: string;\n}\n\ninterface SendOptions {\n  from?: string;\n  to: string;\n  cc: string;\n  bcc: string;\n  replyTo?: string;\n  subject: string;\n  text: string;\n  html: string;\n  [key: string]: unknown;\n}\n\ntype ProviderOptions = Parameters<typeof nodemailer.createTransport>[0];\n\nconst emailFields = [\n  'from',\n  'replyTo',\n  'to',\n  'cc',\n  'bcc',\n  'subject',\n  'text',\n  'html',\n  'attachments',\n];\n\nexport default {\n  provider: 'nodemailer',\n  name: 'Nodemailer',\n\n  init(providerOptions: ProviderOptions, settings: Settings) {\n    const transporter = nodemailer.createTransport(providerOptions);\n\n    return {\n      send(options: SendOptions) {\n        // Default values.\n        const emailOptions: SendMailOptions = {\n          ..._.pick(options, emailFields),\n          from: options.from || settings.defaultFrom,\n          replyTo: options.replyTo || settings.defaultReplyTo,\n          text: options.text || options.html,\n          html: options.html || options.text,\n        };\n\n        return transporter.sendMail(emailOptions);\n      },\n    };\n  },\n};\n"],"names":["emailFields","provider","name","init","providerOptions","settings","transporter","nodemailer","createTransport","send","options","emailOptions","_","pick","from","defaultFrom","replyTo","defaultReplyTo","text","html","sendMail"],"mappings":";;;AAsBA,MAAMA,WAAc,GAAA;AAClB,IAAA,MAAA;AACA,IAAA,SAAA;AACA,IAAA,IAAA;AACA,IAAA,IAAA;AACA,IAAA,KAAA;AACA,IAAA,SAAA;AACA,IAAA,MAAA;AACA,IAAA,MAAA;AACA,IAAA;AACD,CAAA;AAED,YAAe;IACbC,QAAU,EAAA,YAAA;IACVC,IAAM,EAAA,YAAA;IAENC,IAAKC,CAAAA,CAAAA,eAAgC,EAAEC,QAAkB,EAAA;QACvD,MAAMC,WAAAA,GAAcC,UAAWC,CAAAA,eAAe,CAACJ,eAAAA,CAAAA;QAE/C,OAAO;AACLK,YAAAA,IAAAA,CAAAA,CAAKC,OAAoB,EAAA;;AAEvB,gBAAA,MAAMC,YAAgC,GAAA;AACpC,oBAAA,GAAGC,CAAEC,CAAAA,IAAI,CAACH,OAAAA,EAASV,WAAY,CAAA;AAC/Bc,oBAAAA,IAAAA,EAAMJ,OAAQI,CAAAA,IAAI,IAAIT,QAAAA,CAASU,WAAW;AAC1CC,oBAAAA,OAAAA,EAASN,OAAQM,CAAAA,OAAO,IAAIX,QAAAA,CAASY,cAAc;AACnDC,oBAAAA,IAAAA,EAAMR,OAAQQ,CAAAA,IAAI,IAAIR,OAAAA,CAAQS,IAAI;AAClCA,oBAAAA,IAAAA,EAAMT,OAAQS,CAAAA,IAAI,IAAIT,OAAAA,CAAQQ;AAChC,iBAAA;gBAEA,OAAOZ,WAAAA,CAAYc,QAAQ,CAACT,YAAAA,CAAAA;AAC9B;AACF,SAAA;AACF;AACF,CAAE;;;;"}